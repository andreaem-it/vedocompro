{% extends 'base.html.twig' %}
{% block title %}{{ ad_info.0.name }} - {{ ad_info.0.description }} - VedoCompro.it - Acquista e Vendi con un Video!{% endblock %}
{% block head %}
    <meta property="og:url" content="{{ app.request.uri }}" />
    <meta property="og:type" content="product" />
    <meta property="og:title" content="{{ ad_info.0.name }}" />
    <meta property="og:description" content="{{ ad_info.0.description }}" />
    <meta property="og:image" content="http://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ ad_info.0.id }}-1.jpg" />
    <meta property="og:image:secure_url" content="https://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ ad_info.0.id }}-1.jpg" />
    <meta property="og:video:width" content="450"> <!-- player width -->
    <meta property="og:video:height" content="250"> <!-- player height -->
    <meta property="og:video" content="https://s3.eu-west-2.amazonaws.com/vedocompro/video/{{ ad_info.0.id }}.mp4">
    <meta property="og:video:secure_url" content="https://s3.eu-west-2.amazonaws.com/vedocompro/video/{{ ad_info.0.id }}.mp4"> <!-- required for users whom use SSL (actually Facebook forces everyone to use SSL so you're required to use og:video:secure_url) so get a one -->
    <meta name="viewport" content="width=device-width, initial-scale=0.7, maximum-scale=0.7, user-scalable=0 ">
    <link rel="stylesheet" href="{{ asset('css/custom.css') }}">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" ></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="{{asset('js/jquery.scrolling-tabs.min.js') }}"></script>
    <link rel="stylesheet" href="{{asset('css/jquery.scrolling-tabs.min.css') }}">
    <script src="https://use.fontawesome.com/bdc514bb6a.js"></script>
{% endblock %}
{% block body %}
    
    
        {% include 'template/header.html.twig' %}

    <!-- Modal Photos carousel -->
    <div class="modal fade" id="video-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content modal-video">
          <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                  {% for i in range(1,5) %}
                      {% if loop.first %}
                          <li data-target="#carouselExampleIndicators" data-slide-to="{{ loop.index0 }}" class="active"></li>
                      {% else %}
                          <li data-target="#carouselExampleIndicators" data-slide-to="{{ loop.index0 }}"></li>
                      {% endif %}
                  {% endfor %}
              </ol>
              {% for i in range(1,5) %}
                    {% if loop.first %}
                        <div class="carousel-item active">
                            <img class="img-fluid" style="max-height:400px" src="https://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ ad_info.0.id }}-{{ i }}.jpg">
                        </div>
                    {% else %}
                        <div class="carousel-item">
                            <img class="img-fluid" style="max-height:400px" src="https://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ ad_info.0.id }}-{{ i }}.jpg">
                        </div>
                    {% endif %}
                {% endfor %}
              </div>
            </div>
        </div>
      </div>
    </div>


    <!-- Page -->
    <div class="wrapper">
        <div class="container-fluid pl-5 pr-5">
            <!--<div class="row mt-5 mb-5">
                <div class="search ml-auto ">
                    <input class="form-control float-right" type="text" placeholder="Ricerca">
                </div>
            </div>-->
            <div class="row mt-5">
                <div class="col-sm-10">
                    <div class="row">
                        <div class="col-sm-4">
                            {% if video.accepted == 1 %}<div id="video"></div>{% endif %}
                            <div class="row no-gutters">
                                {% for i in range(1,5) %}
                                    {% if loop.length == 1 %}
                                        <div class="col">
                                            <a href="" data-toggle="modal" data-target="#video-modal"><img style="max-width:120px" class="img-responsive img-thumbnail" src="https://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ ad_info.0.id }}-{{ i }}.jpg"/></a>
                                        </div>
                                    {% else %}
                                        <div class="col" style="margin-top:5px;{% if loop.last %}{% else %}margin-right:5px{% endif %}">
                                            <a href="" data-toggle="modal" data-target="#video-modal"><img class="img-responsive img-thumbnail" src="https://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ ad_info.0.id }}-{{ i }}.jpg"/></a>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <p class="font-weight-light mt-3">
                                Visualizzato <span class="text-blue">{{ ad_info.0.views }} </span>volte
                            </p>
                        </div>

                        <div class="col-sm-8">
                            <div class="row">
                                <div class="col-sm-8">
                                    <h1 class="font-weight-light">{{ ad_info.0.name }}</h1>
                                </div>
                                <div class="col-sm-4 float-right">
                                    <div class="row mt-2 float-right">
                                        <div class="col-xs-2 mr-1">
                                            <div data-network="facebook" class="btn btn-outline-secondary button share-button st-custom-button facebook-share-button btn-round">
                                                <i class="fa fa-facebook" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-2 mr-1">
                                            <div data-network="twitter" class="btn btn-outline-secondary button share-button st-custom-button twitter-share-button btn-round">
                                                <i class="fa fa-twitter" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-2 mr-1">
                                            <div data-network="pinterest" class="btn btn-outline-secondary button share-button st-custom-button pinterest-share-button btn-round">
                                                <i class="fa fa-pinterest" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-2 mr-1">
                                            <div data-network="whatsapp" class="btn btn-outline-secondary button share-button st-custom-button whatsapp-share-button btn-round">
                                                <i class="fa fa-whatsapp" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <div class="col-xs-2 mr-1">
                                            <div data-network="sharethis" class="btn btn-outline-secondary button share-button st-custom-button sharethis-share-button btn-round">
                                                <i class="fa fa-share-alt" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=596a2951191e1a0012335487&product=custom-share-buttons"></script>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12">
                                    <h5 class="font-weight-light">
                                        Venduto da: &nbsp;<a href="{{ path('profilo', {'query': user_info.0.name}) }}">{{user_info.0.name }}</a>&nbsp; ({{user_info.0.points}}) - {{ feed_percent }}% positivi
                                    </h5>
                                    <h1 class="font-weight-normal mb-4">
                                        <strong>
                                            {{ ad_info.0.price }} €
                                        </strong>
                                    </h1>
                                    <p class="font-weight-light">
                                        {{ ad_info.0.description }}
                                    </p>
                                    <p class="font-weight-light">
                                        Condizione: <span class="text-blue">{{ ad_info.0.objCondition }}</span>
                                    </p>
                                    <p class="font-weight-light">
                                        Località: <span class="text-blue">{{ ad_info.0.location }} ({{ ad_info.0.region }})</span>
                                    </p>

                                    <div class="row mt-4 mb-4">
                                        <div class="col-xs-3 ml-3 mr-4">
                                            <a href="" data-toggle="modal" data-target="#call" class="btn btn-block btn-outline-success">Chiama</a>
                                        </div>
                                        <div class="col-xs-3">
                                            <a href="" data-toggle="modal" data-target="#send_message" class="btn btn-block btn-outline-success">Messaggio</a>
                                        </div>
                                    </div>
                                    <p class="font-weight-light">
                                        Categoria: <span class="text-blue">{{ ads.convertCategory(ad_info.0.category|capitalize) }}</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr>
                    <div class="row">
                        <h4 class="mb-4 mt-4 font-weight-light">Inserzioni simili</h4>
                            <hr>
                        {% if similar|length == 1 %}
                            </div>
                        {% endif %}
                            {% for similars in similar %}

                            {% if  loop.index % 6 == 1 or loop.first %}
                            <br>
                            <div class="row">
                                {% endif %}
                                <div class="col-md-2" >
                                    {% if similars.objLevel == 1 %}
                                    <div class="card result-card" style="border: 4px solid rgb(218, 165, 32);">
                                        {% elseif similars.objLevel == 2 %}
                                        <div class="card result-card" style="border: 4px solid #ccc;">
                                            {% elseif similars.objLevel == 3 %}
                                            <div class="card result-card" style="border: 4px solid #CD7F32">
                                                {% else %}
                                                <div class="card result-card">
                                                    {% endif %}
                                                    {% set category = (ads.slugify(ads.convertCategory(similars.category))) %}
                                                    <a href="{{ url('vedi_oggetto', {'category': category, 'item': similars.id, 'title': ads.slugify(similars.name) }) }}">
                                                    <img class="card-img-top img-fluid" src="https://s3.eu-west-2.amazonaws.com/vedocompro/photo/{{ similars.id }}-1.jpg"></a>
                                                    <div class="card-body">
                                                        <h5 class="card-title font-weight-light">
                                                            <a href="{{ url('vedi_oggetto', {'category': category, 'item': similars.id, 'title': ads.slugify(similars.name) }) }}">{{ similars.name }}</a>
                                                            <p><strong>{{ similars.price }}&nbsp;€</strong></p>
                                                        </h5>
                                                    </div>
                                                </div>
                                            </div>
                                            {% if  loop.index % 6 == 0 or loop.last %}
                                        </div>
                                    {% elseif loop.last %}
                                        <p></p>
                                    {% endif %}

                                {% endfor %}
                            </div>
                        </div>
                <div class="col-sm-2 text-center">
                    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- VedoCompro -->
<ins class="adsbygoogle"
     style="display:inline-block;width:160px;height:600px"
     data-ad-client="ca-pub-4967985757423249"
     data-ad-slot="7771954836"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
                </div>
            </div>
        </div>
    </div>


    {% if app.user %}
        {% embed 'modals/ad.message.html.twig' %}
        {% endembed %}
    {% else %}
        <div class="modal fade" id="send_message">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Messaggio</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h6>Spiacente, devi essere <a href="{{ url('registrati') }}">registrato</a> per inviare messaggi.</h6>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% embed 'modals/ad.call.html.twig' %}
{% endembed %}
{% embed 'template/footer.html.twig' %}
{% endembed %}
<style>
    .modal {
        text-align: center;
        padding: 0!important;
    }

    .modal:before {
        content: '';
        display: inline-block;
        height: 35%;
        vertical-align: middle;
        margin-right: -4px;
    }

    .modal-dialog {
        display: inline-block;
        text-align: left;
        vertical-align: middle;
    }
    .row.no-gutters {
        margin-right: 0;
        margin-left: 0;

    & > [class^="col-"],
    & > [class*=" col-"] {
            padding-right: 0;
            padding-left: 0;
        }
    }
     .modal.modal-fullscreen .modal-content {
         background: rgba(0, 0, 0, .5);
     }
    .modal.modal-fullscreen .modal-header {
        border: 0;
        color: #fff;
    }
    .modal.modal-fullscreen .modal-footer {
        border-color: rgba(0, 0, 0, .5);
    }

    .btn-round {
        border-radius:50px;
    }
    .facebook-share-button {
        background-color: #3B5998!important;
        border-color: #FFF;
        color: #FFF;
        padding-left: 14px;
        padding-right: 14px;
    }
    .facebook-share-button:hover {
        opacity: .8;
        top: -4px;
        position: relative;
    }
    .twitter-share-button {
        background-color: #55acee!important;
        border-color: #FFF;
        color: #FFF;
        padding-left: 11px;
        padding-right: 11px;
    }
    .twitter-share-button:hover {
        opacity: .8;
        top: -4px;
        position: relative;
    }
    .pinterest-share-button {
        background-color: #cb2027!important;
        border-color: #FFF;
        color: #FFF;
        padding-left: 11px;
        padding-right: 11px;
    }
    .pinterest-share-button:hover {
        opacity: .8;
        top: -4px;
        position: relative;
    }
    .whatsapp-share-button {
        background-color: #25d366!important;
        border-color: #FFF;
        color: #FFF;
        padding-left: 11px;
        padding-right: 11px;
    }
    .whatsapp-share-button:hover {
        opacity: .8;
        top: -4px;
        position: relative;
    }
    .sharethis-share-button {
        background-color: #95d03a!important;
        border-color: #FFF;
        color: #FFF;
        padding-left: 11px;
        padding-right: 11px;
    }
    .sharethis-share-button:hover {
        opacity: .8;
        top: -4px;
        position: relative;
    }
    .text-blue {
        color: rgb(67,150,193) !important;
    }
    #video {

    }
    .video-mobile {
        width: 122%!important;
        left: 0px!important;
        margin-left: -50px!important;
        margin-top: -21px!important;
    }
</style>
    <script type="text/JavaScript">
        var playerInstance = jwplayer("video");
        playerInstance.setup({
            file: "{{ video.filename }}",
            type: "mp4",
        });
        setTimeout(function() {
            jwplayer().pause();
            jwplayer().setMute(true);
            jwplayer().setControls(true);
        },3000);

        jwplayer().onTime(function(object) {
            if (object.position > object.duration - 1) {
                jwplayer().pause();
            }
        });
        if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
            $('#video').addClass('video-mobile');
        };
    </script>
{% endblock %}